Du bist Webentwickler und hast die Aufgabe das Kraken Tool umfassend zu erneuern. das Kraken- Tool ist ein Web Tool mit dem die Tester sich testadressen nach bestimmten Kriterien aussuchen können. das kranken Tool basiert momentan auf einem Groovy for Grails Framework was mit einer sehr alten Java Version kompatibel ist. das heißt die erste Anforderung ist das Framework des Krakens auf einer Version anzuheben die mit einer aktuellen Java Version lauffähig ist. dabei ist zu analysieren ob der Ansatz Grails weiter verwendet wird oder ein alternatives Framework mit Begründung. Der KRAKEN muss unter Linux und Windows OS lauffähig sein.
die zweite große Anforderung ist, dass das Backend des Kraken Tools grundsätzlich vereinfacht werden soll. momentan greift es kraken Tool auf verschiedene Datenbanken zu unter anderem werden für die Test Adressermittlungen auf die Mamas Datenbank auf die Wizard Datenbank und auf die Ads Datenbank zugegriffen. die Zugriffe auf die Wizard Datenbank soll eliminiert werden in denen auf Datenbank Views der Mamas Datenbank zugegriffen werden und diese Views per DB Link auf entsprechende Wizard Datenbanken verlinkt sind. Die neue Logik ist im Anhang kraken_mamas_tables.xlsx beigefügt. Im Arbeitsblatt „VKD“ das neue Datenmodell für Footprint „Vodafone Kabel“ und im Arbeitsblatt „UM“ das neue Datenmodell für Footpring „Unitymedia“.

Das kraken Tool funktioniert so, dass der Tester sich eine Testumgebung auswählt für die er Testadressen braucht und einen Footprint es sind 2 footPrints zur Auswahl: Footprint Vodafone Kabel und Unitymedia. je nach Footprint ist im Back End die Adresse- Datenermittlung getrennt zu behandeln, da es sich jeweils um unterschiedliche Tabellen handelt. weiter kann der Tester auswählen in welcher Region er die Adressen braucht. die Region entsprechen ungefähr den Bundesländern in Deutschland und er kann hier keine eine oder mehrere Regionen über die GUI auswählen. Bedenke das im Unitymedia-Footprint andere Regionen zur Auswahl sind als bei Vodafone Kabel.  Der Tester kann auch auswählen wieviel Ergebnisse angezeigt bekommen möchte. standardmäßig wenn er nix explizit eingibt sind es 10 Ergebnisse. grundsätzlich je nachdem was der Bediener des Krakens eingibt oder auswählt ändert sich die GUI entsprechend so, dass der Anwender nur sinnvolle Eingaben machen können. diese Logik soll auf jeden Fall beibehalten werden

Schaue dir aus diesem Grund die Logik in dem File _inputForm.GSP genau an hier ist derzeit die ganze Client Logik definiert und dieses soll aus Usersicht genauso beibehalten werden. des weiteren auch die Farbgebung und der Aufbau des Kraken Tools sollen beibehalten werden. es befindet sich auch ein Easter Egg indem er auf das Logo des Kranken Tool einen Doppelklick macht und ein Foto erscheint. dies soll auch beibehalten werden (Bitte Foto nur innerhalb der KRAKEN GUI anzeigen). ein Feature des KRAKEN ist die Zweisprachigkeit. das heißt es gibt einen Schalter mit denen auf Deutsch oder auf Englisch umgeschaltet werden kann. dies soll ebenfalls beibehalten werden. der Kraken beinhaltet auch eine API die momentan nicht vollständig funktioniert (nicht alle Felder werden korrekt gemappt). bitte auch entsprechend eine API erstellen. am besten über query sodass per Json Request  die entsprechenden Abfragen wie sie auch über die GUI gemacht werden können entsprechend auch über die API gemacht werden können und dokumentiere die API bitte entsprechend. Die API soll wie bisher über einen Link im Kopfbereich des KRAKEN aufrufbar sein.

Die Datenbank verbindungs Url‘s werden derzeit über einen Request auf die PLE Datenbank mit Übergabe der Testumgebung ermittelt. die Daten für die PLE Datenbank sind in der Config.groovy zu finden (Konstante url_ple, user_ple, pw_ple). in dieser Datei befinden sich auch weitere Konstanten mit Datenbank Strings. die werden zwar nicht mehr benötigt (die kommen noch aus einer alten Version) aber die Konstanten sollen beibehalten werden.  die neue Version soll so gebaut werden falls auf die PLE Datenbank kein Zugriff sein sollte dann als Backup auf die Konstanten in der config.groovy zurückgreifen.

Nochmal zur kraken: bedenke dass in den Kompaktboxen bestimmte Werte in den Auswahlboxen farblich hinterlegt sind. die Logik dafür befindet sich momentan in der Helper.JS Die Farbgebung bestimmter Werte soll genauso übernommen werden beziehungsweise aus user Sicht weiterhin so vorhanden sein. des Weiteren ist wichtig dass der Vertragscode in den Panel vertragssituationen das man mehrere Vertragscodes auswählen kann. das ist momentan mit einem Multi Select Combobox gelöst. in Zukunft sollte es weiterhin möglich sein mehrere Vertragscodes hier auszuwählen (berücksichtige dass die Liste an Vertragscodes recht lang ist).
Tooltipps sollen ebenfalls beibehalten werden. NOchmal wichtig hervorzuheben ist, dass die GUI-Felder in verschiedenen Panels (z.B. Panel "Grundeinstellung", "Workflow", "Technische Parameter" usw.) gruppiert sind. Diese Gruppierung muss beibehalten werden.

Setzte für die GUI Elemente eindeutige sinnvolle IDs. Es müssen nicht die selben sein wie bisher (sind derzeit zum Teil suboptimal). Für Debug-Zwecke soll ein Logging implementiert werden, dass die DB-Abfragen zeigt. Da nicht jeder Anwender zugriff auf die Logs hat, haben wir das bisher so gelöst, dass die SQL’s zusätzlich in der GUI in einem Hidden-Feld ausgegeben werden. Dies soll nach möglichkeit beibehalten werden. In der API sollen die DB-Abfragen standartmäßig nicht im Response erscheinen. Hier ggf. im Request einen Schalter einbauen, der Steuert ob die DB-Abfragen im Response erscheinen oder nicht.
Es soll auch eine neue fachliche Anforderung umgesetzt werden. In dem Panel „Grundeinstellung“ soll ein neues Feld „PLZ“ (Tooltipp „Postleitzahl“) bzw. wenn Schalter auf Englisch dann „ZIP“ und Tooltipp „zip-code“ implementiert werden. Eine deutsche Postleitzahl besteht aus 5 Zahlen. Nur vollqualifizierte Eingaben sind erlaubt. Das neue Feld soll neben den Regionen platziert werden. Das neue Feld dient der Suche von Adressen mit einer bestimmten Postleitzahl. Wenn über Postleitzahl gesucht wird, werden ausgewählte Regionen ignoriert (oder in GUI inaktiv gesetzt, oder alle Regionen ausgewählt). Wenn über PLZ gesucht wird dann entsprechende Anfrage an ADS-DB auf 10000 Datensätze beschränken. Mit den zurückgelieferten Adresse-IDs dann entsprechen gegen MAMAS-DB Abfragen, falls weiter Filter in der GUI durch Anwender gesetzt wurden. Beispiel: angenommen der Anwender möchte nur Adressen aus dem PLZ-Bereich 15344, dann anfrage sinngemäß: select A_Adresse_ID  from ads.ta_adresse where A_SERVICEADRESSE = 'J' and A_V_PLZ_SUCH = 15344 and rownum <= 10000; Anhand der erhaltenen Liste von A_Adresse_ID dann gegen bspw. NE4.V_VMBKT_ADS_ALM und NE4.TA_VMBKT_OBJEKT (siehe Datenmodell im Anhang). Falls Anwender nur nach PLZ ohne weiteren Filter sucht, kann direkt für die Ergebnisliste so gesucht werden: select A_Adresse_ID As OBJEKT_ID, A_UM_GEBAEUDE_ID As UM_ADRESSE_ID,  A_PLZ || ' ' || A_ORTSNAME || ', ' || A_STRNAME || ' ' || A_HAUSNR || ' ' || A_HAUSNR_ZUS AS ADRESSE, A_REF_TELEFONIE_ONKZ AS ONKZ from ads.ta_adresse where A_SERVICEADRESSE = 'J' and A_V_PLZ_SUCH = 15344 and rownum <= 10; (10 ist hier der Standartwert falls User in GUI bei „Anz. Ergebnisse“) nichts anderes eingibt.
Bedenke das die A_UM_GEBAEUDE_ID nur bei Footprint Unitymedia in der Ergebnisliste angezeigt werden soll.
Wenn in der GUI auf den Button „Suchen“ geklickt wird, soll wie bisher auch, während der Suche ein Indikator  angezeigt werden.

Bitte analysiere nun den bestehenden Code gründlich. Gibt es noch unklarheiten bzgl. der Anforderung – dann frage bitte nach. Bevor du anfängst etwas zu implementieren, nenne mir erst deine Analyseergebnisse und Vorschlag für Framework (Grails oder was anderes) mit Begründung.


